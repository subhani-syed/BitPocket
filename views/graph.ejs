<%-include('../views/partials/header.ejs')%>
<h1>Graph</h1>

<div class="wrapper">
  <div class="big_screen">
    <img src="/images/metrics.svg" alt="metrics">
  </div>
  <div class="chart">
    <canvas id="myChart" ></canvas>
  </div>
</div>

<div class="graphs">
  <form action="/line" method="post">
    <button class="button" type="submit">Line</button>
  </form>
  <form action="/bar" method="post">
    <button class="button" type="submit">Bar</button>
  </form>
  <form action="/radar" method="post">
    <button class="button" type="submit">Radar</button>
  </form>
  <form action="/pie" method="post">
    <button class="button" type="submit">Pie</button>
  </form>
  <form action="/dough" method="post">
    <button class="button" type="submit">Dough-nut</button>
  </form>
</div>


<script>
  var ctx = document.getElementById("myChart").getContext("2d");
  const data = {
    labels: ["Type A", "Type B", "Type C"],
    datasets: [
      {
        label: "Money Distribution",
        data:[ Number("<%=t1%>"),Number("<%=t2%>"),Number("<%=t3%>")],
        backgroundColor: [
          "rgb(255, 99, 132)",
          "rgb(54, 162, 235)",
          "rgb(255, 205, 86)",
        ],
        hoverOffset: 4,
      },
    ],
  };

  const config = {
    // type: "pie",
    type:"<%= graph_type%>",
    data: data,
    options: {
    responsive:false,
    animations: {
      tension: {
        duration: 1000,
        easing:'easing',
        from: 1,
        to: 0,
        loop: true
      }
    },
    scales: {
      y: { // defining min and max so hiding the dataset does not change scale range
        min: 0,
        // max: 300
      }
    }
  }

  };

  var myChart = new Chart(ctx,config);

</script>

<%-include('../views/partials/footer.ejs')%>
